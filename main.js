!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=t.querySelector(this._submitButtonSelector),this._inputEls=Array.from(t.querySelectorAll(this._inputSelector))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);console.log(t),e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);console.log(t),e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_checkFormValidity(){return this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this.toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class t{constructor(e){this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this.handleEscClose),this._popupElement.addEventListener("mousedown",this.handleOverlayClick)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this.handleEscClose),this._popupElement.removeEventListener("mousedown",this.handleOverlayClick)}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}handleEscClose=e=>{"Escape"===e.key&&this.close()};handleOverlayClick=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}}class o extends t{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{const t=this._getInputValues();this._handleFormSubmit(t)}))}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}close(){this._popupForm.reset(),super.close()}}class s{constructor(e,t,o){let{name:s,link:n}=e;this._name=s,this._link=n,this._cardSelector=t,this._handleCardClick=o}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}testMethod(){console.log(this.name)}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove()}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__title").innerText=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._setEventListeners(),this._cardElement}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=new o("#card-add-modal",(function(e){const t=q(e);c.addItem(t),r.close()}));r.setEventListeners();const i=new o("#profile-edit-modal",(function(e){l.setUserInfo(e),i.close()}));i.setEventListeners();const a=new class extends t{constructor(e){super(e),this.popupImage=document.querySelector(".modal__image"),this.popupCaption=document.querySelector(".modal__caption")}open(e){this.popupCaption.textContent=e.name,this.popupImage.src=e.link,this.popupImage.alt=e.name,super.open()}}("#view-image-modal");a.setEventListeners();const l=new class{constructor(e,t){this.nameEl=document.querySelector(e),this.aboutEl=document.querySelector(t)}getUserInfo(){return{name:this.nameEl.textContent,about:this.aboutEl.textContent.trim()}}setUserInfo(e){let{name:t,about:o}=e;this.nameEl.textContent=t,this.aboutEl.textContent=o,console.log(t,o)}}("#profile-name","#profile-description"),c=new class{constructor(e,t){let{items:o,renderer:s}=e;this._items=o,this._renderer=s,this._wrapper=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._wrapper.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg  "}],renderer:e=>{const t=q(e);c.addItem(t)}},".cards__list");c.renderItems(),document.querySelector(".modal"),document.querySelector("#card-template").content.querySelector(".card");const u=document.querySelector("#profile-edit-button"),d=document.querySelector("#card-add-modal"),m=document.querySelector("#profile-edit-modal"),_=(m.querySelector("#profile-close-button"),d.querySelector(".modal__close"),document.querySelector("#name-input")),p=(document.querySelector("#profile-name"),document.querySelector("#about-me")),h=(document.querySelector("#profile-description"),document.querySelector("#modal-save-button"),document.querySelector(".profile__add-button")),y=m.querySelector(".modal__form"),E=d.querySelector(".modal__form"),S=(document.querySelector(".card__list"),document.querySelector("#image-modal-close"),E.querySelector(".modal__input_type_title"),E.querySelector(".modal__input_type_url"),document.querySelector("#profile-save-button"),document.querySelector(".cards__list"),new e(n,E));S.enableValidation();const v=new e(n,y);function g(e){a.open(e)}function q(e){return new s(e,"#card-template",g).getView()}v.enableValidation(),u.addEventListener("click",(()=>{const e=l.getUserInfo();_.value=e.name,p.value=e.about,v.toggleButtonState(),i.open()})),document.querySelector(".modal__image"),document.querySelector(".modal__caption"),document.getElementById("view-image-modal"),h.addEventListener("click",(()=>{S.toggleButtonState(),r.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTVCxFQUFlUyxHQUd0QixPQUZhLElBQUlqQyxFQUFLaUMsRUFBTSxpQkFBa0I5QixHQUVsQ1csU0FDZCxDQXhDQWlELEVBQXlCN0YsbUJBYXpCbUYsRUFBa0JwRixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNd0IsRUFBU21DLEVBQVNVLGNBQ3hCa0IsRUFBaUIxRCxNQUFRTCxFQUFPSSxLQUNoQzRELEVBQXdCM0QsTUFBUUwsRUFBTzhDLE1BQ3ZDd0IsRUFBeUJ2RyxvQkFDekJtRSxFQUFpQmpELE1BQU0sSUFHTkYsU0FBU2pDLGNBQWMsaUJBQ3JCaUMsU0FBU2pDLGNBQWMsbUJBQ25CaUMsU0FBU3dGLGVBQWUsb0JBbUJqRE4sRUFBaUJ6RixpQkFBaUIsU0FBUyxLQUN6QzRGLEVBQWtCckcsb0JBQ2xCOEQsRUFBYTVDLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBjb25zb2xlLmxvZyhlcnJvck1lc3NhZ2VFbCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZUVsKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcblxuICAgIGlmIChpc0Zvcm1WYWxpZCkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5oYW5kbGVPdmVybGF5Q2xpY2spO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgXCJtb3VzZWRvd25cIixcbiAgICAgIHRoaXMuaGFuZGxlT3ZlcmxheUNsaWNrXG4gICAgKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgaGFuZGxlT3ZlcmxheUNsaWNrID0gKGUpID0+IHtcbiAgICBpZiAoXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHZhbHVlcyk7IC8vIGhlcmUgd2UgbmVlZCB0byBwYXNzIGFyZ3VtZW50cyAoZnJvbSBmb3JtKVxuICAgIH0pO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dEVscyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIGlucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0RWwubmFtZV0gPSBpbnB1dEVsLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG5cbi8vIGNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NhcmQtYWRkLW1vZGFsXCIsICgpID0+IHt9KTtcblxuLy8gbmV3Q2FyZFBvcHVwLm9wZW4oKSB7XG5cbi8vIH07XG5cbi8vIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICB0ZXN0TWV0aG9kKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikuaW5uZXJUZXh0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIC8vIHNldCBhbHQgdGV4dFxuICAgIC8vIGdldCB0aGUgY2FyZCB2aWV3XG4gICAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgLy8gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIlwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2NhcmQtYWRkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XG4pO1xuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ZpZXctaW1hZ2UtbW9kYWxcIik7XG5cbmFkZEltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIjcHJvZmlsZS1uYW1lXCIsIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnICBcIixcbiAgfSxcbl07XG5cbmNvbnN0IGNhcmREYXRhID0ge1xuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG59O1xuY29uc3Qgc2VsZWN0b3IgPSBcIi5jYXJkc19fbGlzdFwiO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSk7XG4gICAgICAvLyBjcmVhdGUgYSBuZXcgY2FyZCB3aXRoIGNhcmREYXRhXG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG4gICAgfSxcbiAgfSxcbiAgc2VsZWN0b3Jcbik7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1jbG9zZS1idXR0b25cIlxuKTtcbmNvbnN0IGFkZENhcmRNb2RhbENsb3NlQnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXQtbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIik7XG5jb25zdCBzYXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1zYXZlLWJ1dHRvblwiKTtcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpc3RcIik7XG5jb25zdCB2aWV3SW1hZ2VDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtY2xvc2VcIik7XG5jb25zdCBjYXJkVGl0bGVJbnB1dCA9IGFkZENhcmRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiXG4pO1xuY29uc3QgY2FyZFVybElucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdXJsXCIpO1xuY29uc3QgcHJvZmlsZVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1zYXZlLWJ1dHRvblwiKTtcbmNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYWRkQ2FyZEZvcm1FbGVtZW50KTtcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xucHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQodmFsdWVzKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHZhbHVlcyk7XG4gIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQodmFsdWVzKSB7XG4gIGNvbnN0IGNhcmROb2RlID0gZ2V0Q2FyZEVsZW1lbnQodmFsdWVzKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmROb2RlKTtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlcyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSB2YWx1ZXMubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB2YWx1ZXMuYWJvdXQ7XG4gIHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwb3B1cENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld1BvcHVwTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlldy1pbWFnZS1tb2RhbFwiKTtcblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGRhdGEpIHtcbiAgYWRkSW1hZ2VQb3B1cC5vcGVuKGRhdGEpO1xufVxuXG5jb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUNhcmRDbGljayk7XG5cbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMucG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMucG9wdXBDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbiAgfVxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLnBvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLnBvcHVwSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMucG9wdXBJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3Rvcikge1xuICAgIHRoaXMubmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuYWJvdXRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCB1c2VyTmFtZSA9IHRoaXMubmFtZUVsLnRleHRDb250ZW50O1xuICAgIGNvbnN0IHVzZXJBYm91dCA9IHRoaXMuYWJvdXRFbC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgcmV0dXJuIHsgbmFtZTogdXNlck5hbWUsIGFib3V0OiB1c2VyQWJvdXQgfTtcbiAgfVxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLm5hbWVFbC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5hYm91dEVsLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgY29uc29sZS5sb2cobmFtZSwgYWJvdXQpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl93cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX3dyYXBwZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9pbnB1dEVscyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJkaXNhYmxlZCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiaGFuZGxlRXNjQ2xvc2UiLCJoYW5kbGVPdmVybGF5Q2xpY2siLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsImV2ZW50Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwidmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRFbHMiLCJpbnB1dFZhbHVlcyIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiQ2FyZCIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJsaW5rIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRFbGVtZW50IiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsInRlc3RNZXRob2QiLCJ0b2dnbGUiLCJnZXRWaWV3IiwiY29udGVudCIsImNsb25lTm9kZSIsImlubmVyVGV4dCIsInNyYyIsImFsdCIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImFkZENhcmRQb3B1cCIsImNhcmROb2RlIiwiZ2V0Q2FyZEVsZW1lbnQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImVkaXRQcm9maWxlUG9wdXAiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWRkSW1hZ2VQb3B1cCIsInBvcHVwSW1hZ2UiLCJwb3B1cENhcHRpb24iLCJkYXRhIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsIm5hbWVFbCIsImFib3V0RWwiLCJnZXRVc2VySW5mbyIsImFib3V0IiwidHJpbSIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl93cmFwcGVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRGF0YSIsImNhcmQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZENhcmRNb2RhbCIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yIiwiZ2V0RWxlbWVudEJ5SWQiXSwic291cmNlUm9vdCI6IiJ9